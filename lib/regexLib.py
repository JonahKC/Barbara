import re
from unidecode import unidecode

M_BLACKLIST = ["M", "ð”ª", "ð–’", "â“‚", "ðŸ…œ", "ð“¶", "ð“‚", "Ð¼", "ðŸ‡²", "ðŸ„¼", "ðŸ…¼", "ã€½", "ðŸ„œ", "â’¨", "ÕŠ", "á¹ƒ", "á¸¿", "á¹", "à´¸", "àµ¬", "à´¨", "à´£", "àµ©", "ð—†", "ð•„", "êª‘", "â‚˜", "Ê", "á¶†", "á—°", "á™¢", "áŒ ", "çˆª", "â‚¥", "â™ï¸", "â™ï¸", "â“‚ï¸", "ã€½ï¸", "â„³", "â™", "â™", "á›–", "ð•¸", "ê’", "á´¹", "áµ", "â…¯", "ï¼­", "ðŒ", "ð¦", "ð‘€", "ð‘š", "ð‘´", "ð’Ž", "ð“œ", "ð”", "ð•ž", "ð–¬", "ð— ", "ð—º", "ð˜”", "ð˜®", "ð™ˆ", "ð™¢", "ð™¼", "ðš–", "Ï»", "É¯", "É°", "É±", "w", "rn", "01101101", "^^", "âˆ©âˆ©", r"/V\\", r"/v\\", r"/\/\\", r"/\/\\", r"|\\/|" "|V|", "|v|", r"|\\/|", r"|\\/|", "l\/l" "lVl", "lvl", r"l\\/l", r"l\\/l", r"I\\/I" "IVI", "IvI", r"I\\/I", r"I\\/I", "Î›Î›", "â‹€â‹€", "á±á±", "ðŒ¡ðŒ¡", "â´·â´·", "ÊŒÊŒ", "É…É…", "ê‚µ"]

E_BLACKLIST = ["ðŸ“§", "pound", "euro", "e_mail", "3", "Ä—", "Ä™", "Ä“", "Ãª", "Ã¨", "Ã©", "Ã«", "â‚¬", "ð”¢", "ð–Š", "ð’†", "ð“®", "e", "Ðµ", "ðŸ‡ª", "ðŸ„´", "ðŸ…´", "â“”", "ðŸ…”", "â’ ", "ðŸ„”", "âˆŠ", "Ñ”", "á¸•", "á¸—", "á¸™", "á¸›", "á¸", "áº¹", "áº»", "áº½", "áº¿", "á»", "á»ƒ", "á»‡", "á»…", "á¼•", "á¼”", "á¼“", "á¼’", "á¼‘", "á¼", "Î­", "â„°", "â„‡", "âˆƒ", "ð–¾", "Ã«", "âˆ‰", "âˆˆ", "â‰£", "âŠ‘", "â¨Š", "â«•", "ð•–", "ê«€", "â‚‘", "â„¯", "Ì·", "âˆ‘", "à¥¬", "à»‚", "â„®", "Ä›", "Îˆ", "Ø¹", "Îµ", "Ò¾", "Â£", "Î¾", "ð•°", "êŸ", "ð—˜", "ð˜Œ", "ð˜¦", "ð™€", "ðšŽ", "ð”¼", "ð”ˆ", "ï¼¥", "ð„", "ðž", "ð‘’", "ð‘¬", "ð“”", "â…‡", "áµ‰", "á´±", "ð—²", "ð™š", "ð–¤", "ð¸"
, "È©", "È†", "È…", "Ä”", "Ê“", "Ê’", "Éœ", "É", "Éš", "É™", "Éž", "Êš", "âµŸ", "ð™´", "01100101", "[Ìµ", "oÍ¤", "~~[~~", "á¥±", "ä¹‡", "3ï¸âƒ£", "ï¿¡", "ðŸ’·", "â‚ ", "|Îž", "|â˜°", "|Îž", "|â‰¡", "â…", "ð›†", "ð›œ", "ðœ€", "ðœ–", "ðœº", "ð", "ð´", "ðžŠ", "ðž®", "ðŸ„", "ðš¬", "ð›¦", "ðœ ", "ðš", "ðž”", "ð›", "ðœ‰", "ðƒ", "ð½", "ðž·", "â·", "á´‡", "á´²", "áµŠ", "áµ‹" "áµŒ", " Í¤", "É›", "É˜", "â…€", "Eâƒ", "Eâƒž", "á¶’", "á¶“", "á¶”", "á¶•", "â‚¤", "â™µ", "á¶¾", "á¶š", "á´£", "Ð·", "âžŒ", "âž‚", "â¸", "â“·", "ã›", "ã‹‚", "ã¢", "â‚ƒ", "á¶Ÿ", "Â³", "â‘¢", "â’Š", "ðŸ¹", "ðŸ¯", "ðŸ¥", "ðŸ›", "ðŸ‘", "ï¼“", "â˜°", "â˜±", "â˜²", "â˜³", "â˜´", "â˜µ", "â˜¶", "â˜·", "â‰¡", "â©§", "â§¥", "â‰¢", "â‰…", "â‰†", "â‰‡", "â‰Š", "â‰Œ", "âŠ‘", "âŠ’", "ê‚"]

S_BLACKLIST = [":heavy_dollar_sign:", "â“¢", "ðŸ…¢", "$", "ð”°", "ð–˜", "ï¼³", "ÃŸ", "Å¡", "ï¹©", "ÅŸ", "á¹©", "á¹§", "á¹¥", "á¹£", "á¹¡", "à´—", "à´Ÿ", "â’®", "ðŸ‡¸", "ðŸ…‚", "ð—Œ", "5", "ð•¤", "á•", "Ñ•", "àª¡", "â‚›", "ð“ˆ", "s", "Ì·", "Õ", "Õ¿", "È¿", "Â§", "Åš", "Å", "â‚°", "âˆ«", "Ö†", "à°•", "ð•¾", "êŒš", "Ê‚", "Êƒ", "Ê…", "01110011", "á¥‰", "ä¸‚", "5ï¸âƒ£", "ðŸ’²", "â‚·", "ï¼„", "ðŸ’°", "ðŸ¤‘", "ðŸ’µ", "ðŸ’¸", "ð‘ ", "ð’”", "ð“¼", "ð˜€", "ð˜´", "ð™¨", "ðšœ", "ð’–", "ð’", "ð‘†", "ð’®", "ð“¢", "ð”–", "ð•Š", "â‚´", "ð–²", "ð—¦", "ð˜š", "ð‘º", "ð˜š", "ð™Ž", "ðš‚", "áµ¦", "áµ", "Ë¢", "áºž", "á¶³", "Sâƒ", "ðŸ„¢", "Sâƒž", "ðŸ†‚", "áµ´", "á´¤", "sÌ€", "á¶Š", "á”•", "ê‡™"]

TRIM_CHARS = [" ", ".", "\\", "/", ";", ">", "<", ":", ",", "?", "!", "@", "#", "%", "^", "&", "*", "(", ")", "ã…¤", "â€‹", "_", "letter", "ae_letter", "ms", "-", "+", "â€”", "ã€‘", "ã€", "ã€", "ã€Ž", "[", "]", "{", "}", "	",  "`", "$", "=", "", "", "", "", "", "", "", "", ""]

MEESE_REGEX = re.compile("""((([^\|][^\|])|^)me{2,}s+e)""")

def reverseString(x):
  return x[::-1]

def replaceWords(words, string, replaceWith, replace=1):
  if len(words) == 0: return string
  for word in words:
    newString = string.replace(word, replaceWith, replace)
    #if newString != string:
    #print(word + ': ' + newString)
    string = newString
  return string.lower()

def containsMeese(inputStr):
  #print('ORIGINAL STRING: ' + inputStr)
  inputStr = replaceWords(TRIM_CHARS, inputStr, "", -1)
  inputStr = replaceWords(M_BLACKLIST, inputStr, "m", 32)
  inputStr = replaceWords(E_BLACKLIST, inputStr, "e", 64)
  inputStr = replaceWords(S_BLACKLIST, inputStr, "s", 32)
  #inputStr = re.sub(r'\d', '', inputStr)
  inputStr = unidecode(inputStr)
  #print('FINAL STRING: ' + inputStr)
  contains_meese = re.search(MEESE_REGEX, inputStr)
  if contains_meese == None:
    contains_meese = re.search(MEESE_REGEX, reverseString(inputStr))
  if contains_meese == None:
    return False
  return True